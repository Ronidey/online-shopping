{"version":3,"sources":["components/Profile/ProfileMenu.js","components/Profile/OrderTracking.js","components/Profile/Profile.js"],"names":["ProfileMenu","handleLogout","handleDeleteAccount","useState","anchorEl","setAnchorEl","IconButton","aria-label","aria-controls","aria-haspopup","onClick","e","currentTarget","color","Menu","id","open","Boolean","onClose","MenuItem","useStyles","makeStyles","root","width","maxWidth","margin","background","boxShadow","padding","textAlign","marginBottom","fontWeight","fontSize","fontFamily","textTransform","OrderTracking","title","price","qty","classes","className","toLocaleString","Stepper","activeStep","alternativeLabel","map","label","Step","StepLabel","Profile","useContext","AppContext","appState","appDispatch","user","fetchingOrders","setFetchingOrders","myOrders","setMyOrders","deleteAcReqCount","setDeleteAcReqCount","ourRequest","axios","CancelToken","source","get","cancelToken","token","then","res","data","orders","catch","err","isCancel","alert","response","error","cancel","useEffect","delete","window","location","href","ordersHistory","length","order","product","_id","Button","to","variant","size","style","component","Link","Loader","Page","preventDefault","confirm","type","lineHeight","firstName","lastName","email","position"],"mappings":"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","file":"static/js/6.2a6c304c.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nfunction ProfileMenu({ handleLogout, handleDeleteAccount }) {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (e) => {\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label='more'\r\n        aria-controls='profile-menu'\r\n        aria-haspopup='true'\r\n        onClick={handleClick}\r\n        color='inherit'\r\n      >\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id='profile-menu'\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={handleLogout}>Logout</MenuItem>\r\n\r\n        <MenuItem onClick={handleDeleteAccount}>Delete Account</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileMenu;\r\n","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nfunction OrderTracking({ title, price, qty }) {\r\n  const activeStep = 1;\r\n  const steps = ['Order placed', 'Shipped to your city', 'Delivered'];\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <header>\r\n        <h5>{title}</h5>\r\n        <p>\r\n          <b>Price:</b> {price.toLocaleString()}\r\n        </p>\r\n        <p>\r\n          <b>Qty:</b> {qty}\r\n        </p>\r\n      </header>\r\n      <Stepper activeStep={activeStep} alternativeLabel>\r\n        {steps.map((label) => (\r\n          <Step key={label}>\r\n            <StepLabel>{label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: '900px',\r\n    margin: '0 auto 2rem',\r\n    background: '#fff',\r\n    boxShadow: '0 0 4px rgba(0, 0, 0, 0.15)',\r\n    padding: '2rem',\r\n\r\n    '& header': {\r\n      color: '#464343',\r\n      textAlign: 'center',\r\n      marginBottom: '2rem',\r\n      '& h5': {\r\n        fontWeight: '600',\r\n        fontSize: '1.25rem',\r\n        color: 'var(--clr-primary)',\r\n        fontFamily: 'sans-serif',\r\n        textTransform: 'capitalize'\r\n      },\r\n\r\n      '& p': {\r\n        marginBottom: '0.5rem'\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport default OrderTracking;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport AppContext from '../../AppContext';\r\nimport Page from '../Page';\r\nimport { BiUser } from 'react-icons/bi';\r\nimport { AiOutlineArrowLeft } from 'react-icons/ai';\r\nimport ProfileMenu from './ProfileMenu';\r\nimport OrderTracking from './OrderTracking';\r\nimport Button from '@material-ui/core/Button';\r\nimport Loader from '../Loader';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const { appState, appDispatch } = useContext(AppContext);\r\n  const user = appState.user;\r\n  const [fetchingOrders, setFetchingOrders] = useState(true);\r\n  const [myOrders, setMyOrders] = useState([]);\r\n  const [deleteAcReqCount, setDeleteAcReqCount] = useState(0);\r\n\r\n  // Getting All Orders History\r\n  useState(() => {\r\n    const ourRequest = axios.CancelToken.source();\r\n\r\n    axios\r\n      .get('/my-orders', { cancelToken: ourRequest.token })\r\n      .then((res) => {\r\n        setMyOrders(res.data.orders);\r\n        setFetchingOrders(false);\r\n      })\r\n      .catch((err) => {\r\n        if (!axios.isCancel(err)) {\r\n          alert(err.response.data.error);\r\n        }\r\n      });\r\n\r\n    return () => ourRequest.cancel();\r\n  }, []);\r\n\r\n  // Delete Account\r\n  const handleDeleteAccount = (e) => {\r\n    e.preventDefault();\r\n\r\n    const verify = window.confirm('Do you want to DELETE your account?');\r\n    if (verify) setDeleteAcReqCount(deleteAcReqCount + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (deleteAcReqCount) {\r\n      const ourRequest = axios.CancelToken.source();\r\n\r\n      axios\r\n        .delete('/users/profile', {}, { cancelToken: ourRequest.token })\r\n        .then(() => {\r\n          window.location.href = '/';\r\n        })\r\n        .catch((err) => {\r\n          if (!axios.isCancel(err)) {\r\n            alert(err.response.data.error);\r\n          }\r\n        });\r\n\r\n      return () => ourRequest.cancel();\r\n    }\r\n  }, [deleteAcReqCount]);\r\n\r\n  // Handle Logout\r\n  const handleLogout = () => {\r\n    if (window.confirm('Do you want to logout?')) {\r\n      appDispatch({ type: 'logout' });\r\n    }\r\n  };\r\n\r\n  // Order Tracking Templates\r\n  const ordersHistory = myOrders.length ? (\r\n    myOrders.map((order) => (\r\n      <OrderTracking key={order._id} {...order.product} />\r\n    ))\r\n  ) : (\r\n    <div className='no-orders'>\r\n      <h2>You have not ordered anything yet!</h2>\r\n      <Button\r\n        to='/'\r\n        variant='contained'\r\n        size='large'\r\n        style={{ background: 'var(--clr-primary)', color: '#fff' }}\r\n        component={Link}\r\n      >\r\n        Go Back Home\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  if (fetchingOrders) return <Loader />;\r\n\r\n  return (\r\n    <Page title='My Profile'>\r\n      <main>\r\n        <section className='profile'>\r\n          <div className='profile-grid'>\r\n            <div className='profile-grid__col d-flex flex-column'>\r\n              <header className='d-flex align-items-center justify-content-between'>\r\n                <Link to='/' className='btn-go-home d-flex align-items-center'>\r\n                  <AiOutlineArrowLeft />\r\n                  <span>Go Home</span>\r\n                </Link>\r\n\r\n                <ProfileMenu\r\n                  handleDeleteAccount={handleDeleteAccount}\r\n                  handleLogout={handleLogout}\r\n                />\r\n              </header>\r\n\r\n              <div className='user-container flex-grow-1'>\r\n                <div className='user'>\r\n                  <div style={{ fontSize: '5rem', lineHeight: 0 }}>\r\n                    <BiUser />\r\n                  </div>\r\n                  <div className='user__text'>\r\n                    <div className='user__name text-capitalize'>\r\n                      {user.firstName + ' ' + user.lastName}\r\n                    </div>\r\n                    <div className='user__email'>{user.email}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style={{ position: 'relative' }} className='profile-grid__col'>\r\n              {ordersHistory}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </Page>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"sourceRoot":""}
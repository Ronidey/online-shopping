(this["webpackJsonpreact-practice"]=this["webpackJsonpreact-practice"]||[]).push([[3],{576:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i}));var c=a(22),r=a.n(c),n=function(t,e){return r.a.post("/users/my-cart",{productId:t,size:e,qty:1})},s=function(t){return r.a.delete("/users/my-cart/".concat(t))},i=function(t){return r.a.get("/products/".concat(t))}},580:function(t,e,a){},581:function(t,e,a){},582:function(t,e,a){},594:function(t,e,a){"use strict";a.r(e);var c=a(65),r=a.n(c),n=a(94),s=a(255),i=a(256),o=a(89),d=a(258),l=a(257),u=a(1),p=a.n(u),h=a(24),j=a(99),b=a(22),m=a.n(b),f=a(73),O=a(2);function x(t){return Object(O.jsxs)("div",{className:"product-sizes d-flex align-items-center flex-wrap",children:[Object(O.jsx)("h6",{children:"Sizes- US/India:"}),Object(O.jsx)("div",{children:t.sizes.map((function(e){return Object(O.jsx)("span",{onClick:function(){return t.changeSize(e)},className:e==t.selectedSize?"is-active":"",children:e},e)}))})]})}var v=p.a.memo(x);a(580);function g(t){var e=[];for(var a in t.desc)e.push(Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:a}),Object(O.jsx)("span",{children:t.desc[a]})]},a));return Object(O.jsxs)("div",{className:"product-details",children:[Object(O.jsx)("h3",{children:"Product Details"}),Object(O.jsx)("div",{className:"details-container",children:e})]})}var C=p.a.memo(g),y=a(13),z=(a(581),a(250)),k=a(521);function N(t){var e=t.product,a=Object(u.useState)(e.imgUrls[0]),c=Object(y.a)(a,2),r=c[0],n=c[1],s=function(t){n(t.currentTarget.dataset.url)},i=S();return Object(O.jsxs)("div",{className:"product-img-group",children:[Object(O.jsxs)("div",{className:"product-img-lg img ".concat("shoes"===e.category?"is-wide":""),children:[Object(O.jsx)(z.a,{productId:e._id,className:i.btnWish}),Object(O.jsx)("img",{src:r,alt:""})]}),Object(O.jsx)("div",{className:"window-images",children:e.imgUrls.map((function(t,e){return Object(O.jsx)("div",{onClick:s,"data-url":t,className:"img-sm ".concat(t===r?"is-active":""),children:Object(O.jsx)("img",{src:t,alt:""})},e)}))})]})}var S=Object(k.a)({btnWish:{position:"absolute",top:"0.5rem",right:"0.5rem",fontSize:"2rem"}}),I=p.a.memo(N),_=a(74),w=a(132),B=a(93),T=(a(582),a(522));var U=function(t){var e=t.addToCart,a=t.deleteFromCart,c=t.isInCart,r=t.handleBuyClick;return Object(O.jsxs)("div",{className:"text-center",children:[c?Object(O.jsx)(T.a,{variant:"contained",size:"large",onClick:a,color:"primary",children:"Remove"}):Object(O.jsx)(T.a,{variant:"contained",color:"primary",size:"large",onClick:e,children:"Add To Cart"}),Object(O.jsx)(T.a,{variant:"contained",size:"large",onClick:r,color:"secondary",children:"Buy Now"})]})},D=a(30),F=a(576),L=function(t){Object(d.a)(a,t);var e=Object(l.a)(a);function a(t){var c;return Object(s.a)(this,a),(c=e.call(this,t)).state={isLoading:!0,product:null,size:"",redirect:""},c.addItemToCart=c.addItemToCart.bind(Object(o.a)(c)),c.paramId=c.props.match.params.id,c.handleBuyClick=c.handleBuyClick.bind(Object(o.a)(c)),c.deleteFromCart=c.deleteFromCart.bind(Object(o.a)(c)),c.changeSize=c.changeSize.bind(Object(o.a)(c)),c}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=Object(n.a)(r.a.mark((function t(e,a){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.mounted=!0,t.prev=1,t.next=4,Object(F.c)(this.paramId);case 4:c=t.sent,this.mounted&&this.setState({product:c.data.product,size:this.inCart?this.inCart.size:c.data.product.sizes[0],isLoading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),alert(t.t0.response.data.error);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"addItemToCart",value:function(){var t=Object(n.a)(r.a.mark((function t(){var e,a,c,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mounted=!0,e=this.context,a=e.appState,c=e.appDispatch,n=encodeURIComponent("You are not logged in please login first!"),a.isLoggedIn){t.next=5;break}return t.abrupt("return",this.setState({redirect:"/login?returnUrl=".concat(this.props.location.pathname,"&error=").concat(n)}));case 5:Object(F.a)(this.state.product._id,this.state.size).then((function(t){c({type:"updateCart",payload:t.data.cart})})).catch((function(t){alert(t.response.data.error)}));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteFromCart",value:function(){this.mounted=!0;var t=this.context.appDispatch;Object(F.b)(this.state.product._id).then((function(e){t({type:"updateCart",payload:e.data.cart})})).catch((function(t){alert(t.response.data.error)}))}},{key:"handleBuyClick",value:function(){var t=this,e=this.context,a=e.appState,c=e.appDispatch,r=encodeURIComponent("You are not logged in please login first!");return a.isLoggedIn?this.inCart?this.setState({redirect:"/my-cart"}):void Object(F.a)(this.state.product._id,this.state.size).then((function(e){c({type:"updateCart",payload:e.data.cart}),t.setState({redirect:"/my-cart"})})).catch((function(t){alert(t.response.data.error)})):this.setState({redirect:"/login?returnUrl=".concat(this.props.location.pathname,"&error=").concat(r)})}},{key:"changeSize",value:function(t){var e=this.context.appDispatch;this.setState({size:t}),this.isInCart&&m.a.patch("/users/my-cart/".concat(this.state.product._id),{size:t}).then((function(t){e({type:"updateCart",payload:t.data.cart})})).catch((function(t){alert(t.response.data.error)}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.isLoading,c=e.product,r=e.size,n=e.redirect;return this.inCart=this.context.appState.user.cart.find((function(e){return e.product==t.paramId})),a?Object(O.jsx)(B.a,{}):n?Object(O.jsx)(h.a,{to:n}):Object(O.jsxs)(f.a,{title:c.title,children:[Object(O.jsx)(w.a,{}),Object(O.jsx)(_.a,{}),Object(O.jsx)("section",{className:"product",children:Object(O.jsxs)("div",{className:"container product__container",children:[Object(O.jsxs)("div",{className:"product__view",children:[Object(O.jsx)(I,{product:c}),Object(O.jsx)(U,{addToCart:this.addItemToCart,deleteFromCart:this.deleteFromCart,handleBuyClick:this.handleBuyClick,isInCart:Boolean(this.inCart)})]}),Object(O.jsxs)("div",{className:"product__info",children:[Object(O.jsx)("h2",{className:"product__info__title text-capitalize",children:c.title}),Object(O.jsxs)("div",{className:"product-ratings",children:[Object(O.jsxs)("span",{className:"stars",children:[c.avgRating," ",Object(O.jsx)(j.c,{})]}),Object(O.jsxs)("span",{className:"ratings-count",children:["(",c.ratingsCount," ratings)"]})]}),Object(O.jsxs)("div",{className:"product-price",children:[Object(O.jsxs)("span",{className:"price--cur",children:["\u20b9",c.currentPrice]}),Object(O.jsxs)("span",{className:"price--del",children:["\u20b9",c.oldPrice]}),Object(O.jsxs)("span",{className:"offer",children:[c.off,"% off"]})]}),Object(O.jsxs)("div",{className:"product-offers",children:[Object(O.jsx)("h4",{children:"Available offers"}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"5% off"})," on SBI cards"]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"flat 100 rupees discount"})," on Axis Bank cards"]})]}),Object(O.jsx)(v,{sizes:c.sizes,selectedSize:r,changeSize:this.changeSize}),Object(O.jsx)(C,{desc:c.description})]})]})})]})}}]),a}(u.Component);L.contextType=D.a;e.default=Object(h.i)(L)}}]);
//# sourceMappingURL=3.ef9505ba.chunk.js.map
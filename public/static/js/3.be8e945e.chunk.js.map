{"version":3,"sources":["requests.js","components/Product/ProductSizes.js","components/Product/SingleProductDesc.js","components/Product/ProductImgGroup.js","components/Product/ProductAction.js","components/Product/SingleProduct.js"],"names":["addCartItem","productId","size","axios","post","qty","deleteCartItem","delete","getProductById","id","get","ProductSizes","props","className","sizes","map","s","onClick","changeSize","selectedSize","React","memo","SingleProductDesc","desc","prop","push","ProductImgGroup","product","useState","imgUrls","activeImg","setActiveImg","handleImgClick","e","currentTarget","dataset","url","classes","useStyles","category","WishButton","_id","btnWish","src","alt","i","data-url","makeStyles","position","top","right","fontSize","ProductAction","addToCart","deleteFromCart","isInCart","handleBuyClick","Button","variant","color","SingleProduct","state","isLoading","redirect","addItemToCart","bind","paramId","match","params","a","this","mounted","res","setState","data","inCart","alert","response","error","context","appState","appDispatch","errMsg","encodeURIComponent","isLoggedIn","location","pathname","then","type","payload","cart","catch","err","patch","user","find","item","Loader","to","Page","title","Search","MainHeader","Boolean","avgRating","ratingsCount","currentPrice","oldPrice","off","description","Component","contextType","AppContext","withRouter"],"mappings":"wHAAA,2HAEaA,EAAc,SAACC,EAAWC,GACrC,OAAOC,IAAMC,KAAN,iBAA6B,CAAEH,YAAWC,OAAMG,IAAK,KAGjDC,EAAiB,SAACL,GAC7B,OAAOE,IAAMI,OAAN,yBAA+BN,KAO3BO,EAAiB,SAACC,GAAD,OAAQN,IAAMO,IAAN,oBAAuBD,M,mPCZ7D,SAASE,EAAaC,GACpB,OACE,sBAAKC,UAAU,oDAAf,UACE,kDACA,8BACGD,EAAME,MAAMC,KAAI,SAACC,GAAD,OACf,sBACEC,QAAS,kBAAML,EAAMM,WAAWF,IAEhCH,UAAWG,GAAKJ,EAAMO,aAAe,YAAc,GAHrD,SAKGH,GAHIA,WAWFI,UAAMC,KAAKV,G,OClB1B,SAASW,EAAkBV,GACzB,IAAMW,EAAO,GAEb,IAAK,IAAIC,KAAQZ,EAAMW,KACrBA,EAAKE,KACH,gCACE,+BAAOD,IACP,+BAAOZ,EAAMW,KAAKC,OAFVA,IAOd,OACE,sBAAKX,UAAU,kBAAf,UACE,iDACA,qBAAKA,UAAU,oBAAf,SAAoCU,OAK3BH,UAAMC,KAAKC,G,mCClB1B,SAASI,EAAT,GAAuC,IAAZC,EAAW,EAAXA,QAAW,EACFC,mBAASD,EAAQE,QAAQ,IADvB,mBAC7BC,EAD6B,KAClBC,EADkB,KAG9BC,EAAiB,SAACC,GACtBF,EAAaE,EAAEC,cAAcC,QAAQC,MAEjCC,EAAUC,IAEhB,OACE,sBAAKzB,UAAU,oBAAf,UACE,sBACEA,UAAS,6BACc,UAArBc,EAAQY,SAAuB,UAAY,IAF/C,UAKE,cAACC,EAAA,EAAD,CAAYvC,UAAW0B,EAAQc,IAAK5B,UAAWwB,EAAQK,UAEvD,qBAAKC,IAAKb,EAAWc,IAAI,QAE3B,qBAAK/B,UAAU,gBAAf,SACGc,EAAQE,QAAQd,KAAI,SAACqB,EAAKS,GAAN,OACnB,qBAEE5B,QAASe,EACTc,WAAUV,EACVvB,UAAS,iBAAYuB,IAAQN,EAAY,YAAc,IAJzD,SAME,qBAAKa,IAAKP,EAAKQ,IAAI,MALdC,WAajB,IAAMP,EAAYS,YAAW,CAC3BL,QAAS,CACPM,SAAU,WACVC,IAAK,SACLC,MAAO,SACPC,SAAU,UAIC/B,MAAMC,KAAKK,G,2CCPX0B,MAvCf,YAKI,IAJFC,EAIC,EAJDA,UACAC,EAGC,EAHDA,eACAC,EAEC,EAFDA,SACAC,EACC,EADDA,eAEA,OACE,sBAAK3C,UAAU,cAAf,UACG0C,EACC,cAACE,EAAA,EAAD,CACEC,QAAQ,YACRxD,KAAK,QACLe,QAASqC,EACTK,MAAM,UAJR,oBASA,cAACF,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAM,UACNzD,KAAK,QACLe,QAASoC,EAJX,yBASF,cAACI,EAAA,EAAD,CACEC,QAAQ,YACRxD,KAAK,QACLe,QAASuC,EACTG,MAAM,YAJR,yB,iBCXAC,E,kDACJ,WAAYhD,GAAQ,IAAD,8BACjB,cAAMA,IAEDiD,MAAQ,CACXC,WAAW,EACXnC,QAAS,KACTzB,KAAM,GACN6D,SAAU,IAGZ,EAAKC,cAAgB,EAAKA,cAAcC,KAAnB,gBACrB,EAAKC,QAAU,EAAKtD,MAAMuD,MAAMC,OAAO3D,GACvC,EAAK+C,eAAiB,EAAKA,eAAeS,KAApB,gBACtB,EAAKX,eAAiB,EAAKA,eAAeW,KAApB,gBACtB,EAAK/C,WAAa,EAAKA,WAAW+C,KAAhB,gBAdD,E,4FAiBnB,WAAwBrD,EAAOiD,GAA/B,eAAAQ,EAAA,6DACEC,KAAKC,SAAU,EADjB,kBAIsB/D,YAAe8D,KAAKJ,SAJ1C,OAIUM,EAJV,OAMQF,KAAKC,SACPD,KAAKG,SAAS,CACZ9C,QAAS6C,EAAIE,KAAK/C,QAClBzB,KAAMoE,KAAKK,OAASL,KAAKK,OAAOzE,KAAOsE,EAAIE,KAAK/C,QAAQb,MAAM,GAC9DgD,WAAW,IAVnB,gDAcIc,MAAM,KAAIC,SAASH,KAAKI,OAd5B,yD,2FAkBA,WACER,KAAKC,SAAU,I,kEAGjB,kCAAAF,EAAA,yDACEC,KAAKC,SAAU,EADjB,EAIoCD,KAAKS,QAA/BC,EAJV,EAIUA,SAAUC,EAJpB,EAIoBA,YACZC,EAASC,mBACb,6CAIGH,EAASI,WAVhB,yCAWWd,KAAKG,SAAS,CACnBV,SAAS,oBAAD,OAAsBO,KAAK1D,MAAMyE,SAASC,SAA1C,kBAA4DJ,MAZ1E,OAiBElF,YAAYsE,KAAKT,MAAMlC,QAAQc,IAAK6B,KAAKT,MAAM3D,MAC5CqF,MAAK,SAACf,GACLS,EAAY,CAAEO,KAAM,aAAcC,QAASjB,EAAIE,KAAKgB,UAErDC,OAAM,SAACC,GACNhB,MAAMgB,EAAIf,SAASH,KAAKI,UAtB9B,gD,kFA0BA,WACER,KAAKC,SAAU,EADA,IAEPU,EAAgBX,KAAKS,QAArBE,YAER3E,YAAegE,KAAKT,MAAMlC,QAAQc,KAC/B8C,MAAK,SAACf,GACLS,EAAY,CAAEO,KAAM,aAAcC,QAASjB,EAAIE,KAAKgB,UAErDC,OAAM,SAACC,GACNhB,MAAMgB,EAAIf,SAASH,KAAKI,Y,4BAI9B,WAAkB,IAAD,SACmBR,KAAKS,QAA/BC,EADO,EACPA,SAAUC,EADH,EACGA,YACZC,EAASC,mBACb,6CAGF,OAAKH,EAASI,WAOVd,KAAKK,OACAL,KAAKG,SAAS,CACnBV,SAAU,kBAId/D,YAAYsE,KAAKT,MAAMlC,QAAQc,IAAK6B,KAAKT,MAAM3D,MAC5CqF,MAAK,SAACf,GACLS,EAAY,CAAEO,KAAM,aAAcC,QAASjB,EAAIE,KAAKgB,OACpD,EAAKjB,SAAS,CACZV,SAAU,gBAGb4B,OAAM,SAACC,GACNhB,MAAMgB,EAAIf,SAASH,KAAKI,UApBnBR,KAAKG,SAAS,CACnBV,SAAS,oBAAD,OAAsBO,KAAK1D,MAAMyE,SAASC,SAA1C,kBAA4DJ,O,wBAuB1E,SAAWhF,GAAO,IACR+E,EAAgBX,KAAKS,QAArBE,YACRX,KAAKG,SAAS,CAAEvE,SAEZoE,KAAKf,UACPpD,IACG0F,MADH,yBAC2BvB,KAAKT,MAAMlC,QAAQc,KAAO,CAAEvC,SACpDqF,MAAK,SAACf,GACLS,EAAY,CAAEO,KAAM,aAAcC,QAASjB,EAAIE,KAAKgB,UAErDC,OAAM,SAACC,GACNhB,MAAMgB,EAAIf,SAASH,KAAKI,Y,oBAKhC,WAAU,IAAD,SACwCR,KAAKT,MAA5CC,EADD,EACCA,UAAWnC,EADZ,EACYA,QAASzB,EADrB,EACqBA,KAAM6D,EAD3B,EAC2BA,SAOlC,OAJAO,KAAKK,OAASL,KAAKS,QAAQC,SAASc,KAAKJ,KAAKK,MAC5C,SAACC,GAAD,OAAUA,EAAKrE,SAAW,EAAKuC,WAG7BJ,EAAkB,cAACmC,EAAA,EAAD,IAElBlC,EAAiB,cAAC,IAAD,CAAUmC,GAAInC,IAGjC,eAACoC,EAAA,EAAD,CAAMC,MAAOzE,EAAQyE,MAArB,UACE,cAACC,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,IACA,yBAASzF,UAAU,UAAnB,SACE,sBAAKA,UAAU,+BAAf,UACE,sBAAKA,UAAU,gBAAf,UAEE,cAAC,EAAD,CAAiBc,QAASA,IAG1B,cAAC,EAAD,CACE0B,UAAWiB,KAAKN,cAChBV,eAAgBgB,KAAKhB,eACrBE,eAAgBc,KAAKd,eACrBD,SAAUgD,QAAQjC,KAAKK,aAI3B,sBAAK9D,UAAU,gBAAf,UACE,oBAAIA,UAAU,uCAAd,SACGc,EAAQyE,QAIX,sBAAKvF,UAAU,kBAAf,UACE,uBAAMA,UAAU,QAAhB,UACGc,EAAQ6E,UADX,IACsB,cAAC,IAAD,OAEtB,uBAAM3F,UAAU,gBAAhB,cACIc,EAAQ8E,aADZ,kBAMF,sBAAK5F,UAAU,gBAAf,UACE,uBAAMA,UAAU,aAAhB,mBACUc,EAAQ+E,gBAElB,uBAAM7F,UAAU,aAAhB,mBAAqCc,EAAQgF,YAC7C,uBAAM9F,UAAU,QAAhB,UAAyBc,EAAQiF,IAAjC,cAIF,sBAAK/F,UAAU,iBAAf,UACE,kDACA,8BACE,uCADF,mBAGA,8BACE,yDADF,4BAMF,cAAC,EAAD,CACEC,MAAOa,EAAQb,MACfK,aAAcjB,EACdgB,WAAYoD,KAAKpD,aAIlB,cAAC,EAAD,CAAmBK,KAAMI,EAAQkF,6B,GAxMpBC,aAiN5BlD,EAAcmD,YAAcC,IAEbC,sBAAWrD","file":"static/js/3.be8e945e.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport const addCartItem = (productId, size) => {\r\n  return axios.post(`/users/my-cart`, { productId, size, qty: 1 });\r\n};\r\n\r\nexport const deleteCartItem = (productId) => {\r\n  return axios.delete(`/users/my-cart/${productId}`);\r\n};\r\n\r\nexport const updateCartItem = (productId, update) => {\r\n  return axios.patch(`/users/my-cart/${productId}`, update);\r\n};\r\n\r\nexport const getProductById = (id) => axios.get(`/products/${id}`);\r\n","import React from 'react';\r\n\r\nfunction ProductSizes(props) {\r\n  return (\r\n    <div className='product-sizes d-flex align-items-center flex-wrap'>\r\n      <h6>Sizes- US/India:</h6>\r\n      <div>\r\n        {props.sizes.map((s) => (\r\n          <span\r\n            onClick={() => props.changeSize(s)}\r\n            key={s}\r\n            className={s == props.selectedSize ? 'is-active' : ''}\r\n          >\r\n            {s}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(ProductSizes);\r\n","import React from 'react';\r\nimport './SingleProductDesc.css';\r\n\r\nfunction SingleProductDesc(props) {\r\n  const desc = [];\r\n\r\n  for (let prop in props.desc) {\r\n    desc.push(\r\n      <div key={prop}>\r\n        <span>{prop}</span>\r\n        <span>{props.desc[prop]}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className='product-details'>\r\n      <h3>Product Details</h3>\r\n      <div className='details-container'>{desc}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(SingleProductDesc);\r\n","import React, { useState } from 'react';\r\nimport './ProductImgGroup.css';\r\nimport WishButton from '../WishButton';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nfunction ProductImgGroup({ product }) {\r\n  const [activeImg, setActiveImg] = useState(product.imgUrls[0]);\r\n\r\n  const handleImgClick = (e) => {\r\n    setActiveImg(e.currentTarget.dataset.url);\r\n  };\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className='product-img-group'>\r\n      <div\r\n        className={`product-img-lg img ${\r\n          product.category === 'shoes' ? 'is-wide' : ''\r\n        }`}\r\n      >\r\n        <WishButton productId={product._id} className={classes.btnWish} />\r\n\r\n        <img src={activeImg} alt='' />\r\n      </div>\r\n      <div className='window-images'>\r\n        {product.imgUrls.map((url, i) => (\r\n          <div\r\n            key={i}\r\n            onClick={handleImgClick}\r\n            data-url={url}\r\n            className={`img-sm ${url === activeImg ? 'is-active' : ''}`}\r\n          >\r\n            <img src={url} alt='' />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  btnWish: {\r\n    position: 'absolute',\r\n    top: '0.5rem',\r\n    right: '0.5rem',\r\n    fontSize: '2rem'\r\n  }\r\n});\r\n\r\nexport default React.memo(ProductImgGroup);\r\n","import React, { useContext, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nfunction ProductAction({\r\n  addToCart,\r\n  deleteFromCart,\r\n  isInCart,\r\n  handleBuyClick\r\n}) {\r\n  return (\r\n    <div className='text-center'>\r\n      {isInCart ? (\r\n        <Button\r\n          variant='contained'\r\n          size='large'\r\n          onClick={deleteFromCart}\r\n          color='primary'\r\n        >\r\n          Remove\r\n        </Button>\r\n      ) : (\r\n        <Button\r\n          variant='contained'\r\n          color='primary'\r\n          size='large'\r\n          onClick={addToCart}\r\n        >\r\n          Add To Cart\r\n        </Button>\r\n      )}\r\n      <Button\r\n        variant='contained'\r\n        size='large'\r\n        onClick={handleBuyClick}\r\n        color='secondary'\r\n      >\r\n        Buy Now\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductAction;\r\n","import React, { Component } from 'react';\r\n// import React, { useState, useEffect} from 'react';\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport { AiFillStar } from 'react-icons/ai';\r\nimport axios from 'axios';\r\n\r\nimport Page from '../Page';\r\nimport ProductSizes from './ProductSizes';\r\nimport SingleProductDesc from './SingleProductDesc';\r\nimport ProductImgGroup from './ProductImgGroup';\r\nimport MainHeader from '../MainHeader';\r\nimport Search from '../Search';\r\nimport Loader from '../Loader';\r\nimport './SingleProduct.css';\r\nimport ProductAction from './ProductAction';\r\nimport AppContext from '../../AppContext';\r\n\r\nimport { getProductById, addCartItem, deleteCartItem } from '../../requests';\r\n\r\nclass SingleProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isLoading: true,\r\n      product: null,\r\n      size: '',\r\n      redirect: ''\r\n    };\r\n\r\n    this.addItemToCart = this.addItemToCart.bind(this);\r\n    this.paramId = this.props.match.params.id;\r\n    this.handleBuyClick = this.handleBuyClick.bind(this);\r\n    this.deleteFromCart = this.deleteFromCart.bind(this);\r\n    this.changeSize = this.changeSize.bind(this);\r\n  }\r\n\r\n  async componentDidMount(props, state) {\r\n    this.mounted = true;\r\n\r\n    try {\r\n      const res = await getProductById(this.paramId);\r\n\r\n      if (this.mounted) {\r\n        this.setState({\r\n          product: res.data.product,\r\n          size: this.inCart ? this.inCart.size : res.data.product.sizes[0],\r\n          isLoading: false\r\n        });\r\n      }\r\n    } catch (err) {\r\n      alert(err.response.data.error);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  async addItemToCart() {\r\n    this.mounted = true;\r\n\r\n    // 1) Getting appState and appDispacth\r\n    const { appState, appDispatch } = this.context;\r\n    const errMsg = encodeURIComponent(\r\n      'You are not logged in please login first!'\r\n    );\r\n\r\n    // 2) If NOT Logged-in Rediect to Login page\r\n    if (!appState.isLoggedIn) {\r\n      return this.setState({\r\n        redirect: `/login?returnUrl=${this.props.location.pathname}&error=${errMsg}`\r\n      });\r\n    }\r\n\r\n    // 4) Handling request\r\n    addCartItem(this.state.product._id, this.state.size)\r\n      .then((res) => {\r\n        appDispatch({ type: 'updateCart', payload: res.data.cart });\r\n      })\r\n      .catch((err) => {\r\n        alert(err.response.data.error);\r\n      });\r\n  }\r\n\r\n  deleteFromCart() {\r\n    this.mounted = true;\r\n    const { appDispatch } = this.context;\r\n\r\n    deleteCartItem(this.state.product._id)\r\n      .then((res) => {\r\n        appDispatch({ type: 'updateCart', payload: res.data.cart });\r\n      })\r\n      .catch((err) => {\r\n        alert(err.response.data.error);\r\n      });\r\n  }\r\n\r\n  handleBuyClick() {\r\n    const { appState, appDispatch } = this.context;\r\n    const errMsg = encodeURIComponent(\r\n      'You are not logged in please login first!'\r\n    );\r\n\r\n    if (!appState.isLoggedIn) {\r\n      return this.setState({\r\n        redirect: `/login?returnUrl=${this.props.location.pathname}&error=${errMsg}`\r\n      });\r\n    }\r\n\r\n    // this.inCart => current product in cart\r\n    if (this.inCart) {\r\n      return this.setState({\r\n        redirect: '/my-cart'\r\n      });\r\n    }\r\n\r\n    addCartItem(this.state.product._id, this.state.size)\r\n      .then((res) => {\r\n        appDispatch({ type: 'updateCart', payload: res.data.cart });\r\n        this.setState({\r\n          redirect: '/my-cart'\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        alert(err.response.data.error);\r\n      });\r\n  }\r\n\r\n  changeSize(size) {\r\n    const { appDispatch } = this.context;\r\n    this.setState({ size });\r\n\r\n    if (this.isInCart) {\r\n      axios\r\n        .patch(`/users/my-cart/${this.state.product._id}`, { size })\r\n        .then((res) => {\r\n          appDispatch({ type: 'updateCart', payload: res.data.cart });\r\n        })\r\n        .catch((err) => {\r\n          alert(err.response.data.error);\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isLoading, product, size, redirect } = this.state;\r\n\r\n    // Here item.product is an ID and not Object\r\n    this.inCart = this.context.appState.user.cart.find(\r\n      (item) => item.product == this.paramId\r\n    );\r\n\r\n    if (isLoading) return <Loader />;\r\n\r\n    if (redirect) return <Redirect to={redirect} />;\r\n\r\n    return (\r\n      <Page title={product.title}>\r\n        <Search />\r\n        <MainHeader />\r\n        <section className='product'>\r\n          <div className='container product__container'>\r\n            <div className='product__view'>\r\n              {/* Product Images */}\r\n              <ProductImgGroup product={product} />\r\n\r\n              {/* Product Buy & Add To Cart controls */}\r\n              <ProductAction\r\n                addToCart={this.addItemToCart}\r\n                deleteFromCart={this.deleteFromCart}\r\n                handleBuyClick={this.handleBuyClick}\r\n                isInCart={Boolean(this.inCart)}\r\n              />\r\n            </div>\r\n\r\n            <div className='product__info'>\r\n              <h2 className='product__info__title text-capitalize'>\r\n                {product.title}\r\n              </h2>\r\n\r\n              {/* ------- RATINGS ------- */}\r\n              <div className='product-ratings'>\r\n                <span className='stars'>\r\n                  {product.avgRating} <AiFillStar />\r\n                </span>\r\n                <span className='ratings-count'>\r\n                  ({product.ratingsCount} ratings)\r\n                </span>\r\n              </div>\r\n\r\n              {/* ------- PRICE --------- */}\r\n              <div className='product-price'>\r\n                <span className='price--cur'>\r\n                  &#8377;{product.currentPrice}\r\n                </span>\r\n                <span className='price--del'>&#8377;{product.oldPrice}</span>\r\n                <span className='offer'>{product.off}% off</span>\r\n              </div>\r\n\r\n              {/* ------------ OFFERS ------------ */}\r\n              <div className='product-offers'>\r\n                <h4>Available offers</h4>\r\n                <p>\r\n                  <b>5% off</b> on SBI cards\r\n                </p>\r\n                <p>\r\n                  <b>flat 100 rupees discount</b> on Axis Bank cards\r\n                </p>\r\n              </div>\r\n\r\n              {/* ----------- SIZES ---------- */}\r\n              <ProductSizes\r\n                sizes={product.sizes}\r\n                selectedSize={size}\r\n                changeSize={this.changeSize}\r\n              />\r\n\r\n              {/* ------------ DETAILS ----------- */}\r\n              {<SingleProductDesc desc={product.description} />}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nSingleProduct.contextType = AppContext;\r\n\r\nexport default withRouter(SingleProduct);\r\n"],"sourceRoot":""}
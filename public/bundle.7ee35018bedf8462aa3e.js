(self.webpackChunkonline_shopping=self.webpackChunkonline_shopping||[]).push([[816],{6816:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(7294),a=n(9669),l=n.n(a),c=n(3727),o=n(5977),s=n(6565),i=n(1587),u=n(8482);const m=function(e){var t=e.loading,n=e.myOrders;return t?r.createElement(u.Z,null):n.length?r.createElement("section",{className:"my-orders"},r.createElement("header",null,r.createElement("h1",null,"My Orders")),r.createElement("div",{className:"my-orders__container"},n.map((function(e){return r.createElement(c.rU,{key:e._id,to:"/profile/order-status/".concat(e._id)},r.createElement("div",{className:"order-overview d-flex align-items-center"},r.createElement("div",null,r.createElement("img",{src:"/images/shopping.svg",alt:""})),r.createElement("div",{className:"order-overview__text"},r.createElement("h5",{className:"text-capitalize"},e.product.title),r.createElement("span",{className:"order-status"},"on the way"))))})))):r.createElement("div",{className:"no-orders"},r.createElement("h2",null,"You have not ordered anything yet!"),r.createElement(c.rU,{to:"/",className:"btn btn-lg btn-primary"},"Go Shopping"))},d=function(e){var t=e.loading,n=e.myOrders,a=(0,r.useRef)(null),l=(0,o.UO)().productId;if((0,r.useEffect)((function(){var e=setTimeout((function(){a.current.classList.add("show")}),1e3);return function(){return clearTimeout(e)}}),[]),t)return r.createElement(u.Z,null);var s=n.find((function(e){return e._id==l})),i=s.product;return r.createElement("section",{className:"order-status"},r.createElement("header",{className:"d-flex justify-content-between align-items-center"},r.createElement("h1",null,"Order Status"),r.createElement(c.rU,{to:"/profile",className:"btn btn-lg btn-success"},"My Orders")),r.createElement("div",{className:"order-status__info"},r.createElement("div",{className:"text-capitalize"},r.createElement("b",null,"Product: ")," ",i.title),r.createElement("div",null,r.createElement("b",null,"Qty: ")," ",i.qty),r.createElement("div",null,r.createElement("b",null,"Payment: "),r.createElement("span",{style:{color:"green"}},s.paymentStatus)),r.createElement("div",{className:"order-tracking"},r.createElement("div",{className:"track"},r.createElement("div",{ref:a,className:"track-filled"}),r.createElement("div",null,r.createElement("span",{className:"track-dot"}),r.createElement("span",{className:"track-dot"}),r.createElement("span",{className:"track-dot"}),r.createElement("span",{className:"track-dot"}))),r.createElement("div",{className:"stages d-flex justify-content-between"},r.createElement("span",null,"order"),r.createElement("span",null,"packing"),r.createElement("span",null,"shipping"),r.createElement("span",null,"delivery")))))};var f=n(7516),p=n(8193);function E(e,t,n,r,a,l,c){try{var o=e[l](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){E(l,r,a,c,o,"next",e)}function o(e){E(l,r,a,c,o,"throw",e)}c(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const h=function(){var e=(0,r.useContext)(s.Z),t=e.appDispatch,n=e.appState,a=y((0,r.useState)(!1),2),u=a[0],E=a[1],g=y((0,r.useState)(0),2),h=g[0],N=g[1],b=y((0,r.useState)(0),2),k=b[0],w=b[1],_=n.user,x=y((0,r.useState)(!0),2),S=x[0],C=x[1],T=y((0,r.useState)(!0),2),O=T[0],j=T[1];(0,r.useState)((function(){var e=l().CancelToken.source();return l().get("/my-orders",{cancelToken:e.token}).then((function(e){j(e.data.orders),C(!1)})).catch((function(e){l().isCancel(e)||alert(e.response.data.error)})),function(){return e.cancel()}}),[]),(0,r.useEffect)((function(){if(h){var e=l().CancelToken.source();return l().post("/users/logout",{},{cancelToken:e.token}).then((function(){E(!0),t({type:"logout"})})).catch((function(e){l().isCancel(e)||alert(e.response.data.error)})),function(){return e.cancel()}}}),[h]),(0,r.useEffect)((function(){if(k){var e=l().CancelToken.source();return l().delete("/users/profile",{},{cancelToken:e.token}).then((function(){t({type:"logout"}),E(!0)})).catch((function(e){l().isCancel(e)||alert(e.response.data.error)})),function(){return e.cancel()}}}),[k]);var A=function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.confirm("Do you want to Logout?")&&N(h+1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.confirm("Do you want to DELETE your account?")&&w(k+1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?r.createElement(o.l_,{to:"/"}):r.createElement(i.Z,{title:"My Profile"},r.createElement("main",{style:{marginTop:"-72px"}},r.createElement("section",{className:"profile"},r.createElement("div",{className:"profile-grid"},r.createElement("div",{className:"profile-grid__col d-flex flex-column"},r.createElement("header",{className:"d-flex align-items-center justify-content-between"},r.createElement(c.rU,{to:"/",className:"btn-go-home d-flex align-items-center"},r.createElement(p.kyg,null),r.createElement("span",null,"Go Home")),r.createElement("div",{className:"options"},r.createElement("button",{className:"options__btn"},r.createElement(f.T41,null)),r.createElement("ul",{className:"options__menu"},r.createElement("li",null,r.createElement(c.rU,{onClick:A,to:"#",role:"button"},"Logout")),r.createElement("li",null,r.createElement(c.rU,{to:"#",role:"button",onClick:D},"Delete account"))))),r.createElement("div",{className:"user-container flex-grow-1"},r.createElement("div",{className:"user"},r.createElement("div",{style:{fontSize:"5rem",lineHeight:0}},r.createElement(f.EDj,null)),r.createElement("div",{className:"user__text"},r.createElement("div",{className:"user__name text-capitalize"},_.firstName+" "+_.lastName),r.createElement("div",{className:"user__email"},_.email))))),r.createElement("div",{style:{position:"relative"},className:"profile-grid__col"},r.createElement(o.rs,null,r.createElement(o.AW,{exact:!0,path:"/profile"},r.createElement(m,{loading:S,myOrders:O})),r.createElement(o.AW,{path:"/profile/order-status/:productId"},r.createElement(d,{loading:S,myOrders:O}))))))))}}}]);